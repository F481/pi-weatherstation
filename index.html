<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PI-WEATHERSTATION</title>

    <script>
      var xmlhttp = new XMLHttpRequest();

      xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == XMLHttpRequest.DONE ) {
           if (xmlhttp.status == 200) {
               data = JSON.parse(xmlhttp.responseText);
           }
           else if (xmlhttp.status == 400) {
              alert('There was an error 400');
           }
           else {
               alert('something else other than 200 was returned');
           }
        }
      };

      xmlhttp.open("GET", "../cgi-bin/getWeatherData.py", true);
      xmlhttp.send();
    </script>
    <script src="vendor/highsoft/highcharts.js"></script>
  </head>
  <body>
    <div id="container" style="width:100%; height:400px;"></div>
    
    <script>
      // self executing function here
      (function() {
        var myChart = Highcharts.chart('container', {
                chart: {
                    type: 'bar'
                },
                title: {
                    text: 'Pi-Weatherstation'
                },
                xAxis: {
                    categories: ['Apples', 'Bananas', 'Oranges']
                },
                yAxis: [{ // Primary yAxis
                  labels: {
                      format: '{value}°C',
                      style: {
                          color: Highcharts.getOptions().colors[2]
                      }
                  },
                  title: {
                      text: 'Temperature',
                      style: {
                          color: Highcharts.getOptions().colors[2]
                      }
                  },
                  opposite: true

              }, { // Secondary yAxis
                  gridLineWidth: 0,
                  title: {
                      text: 'Humidity',
                      style: {
                          color: Highcharts.getOptions().colors[0]
                      }
                  },
                  labels: {
                      format: '{value} %',
                      style: {
                          color: Highcharts.getOptions().colors[0]
                      }
                  }

              }, { // Tertiary yAxis
                  title: {
                      text: 'Pressure',
                      style: {
                          color: Highcharts.getOptions().colors[1]
                      }
                  },
                  labels: {
                      format: '{value} Pa',
                      style: {
                          color: Highcharts.getOptions().colors[1]
                      }
                  },
                  opposite: true
              }],
                series: [{
                  name: 'Temperature',
                  yAxis: 1,
                  data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
                  tooltip: {
                      valueSuffix: ' °C'
                  }

              }, {
                  name: 'Pressure',
                  type: 'spline',
                  yAxis: 2,
                  data: [1016, 1016, 1015.9, 1015.5, 1012.3, 1009.5, 1009.6, 1010.2, 1013.1, 1016.9, 1018.2, 1016.7],
                  tooltip: {
                      valueSuffix: ' mb'
                  }

              }, {
                  name: 'Humidity',
                  type: 'spline',
                  data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6],
                  tooltip: {
                      valueSuffix: ' %'
                  }
              }]
            });
      })();
    </script>
  </body>
</html>
